import{a as B,b as O,c as N,d as A,f as E,g as v}from"./chunk-JFB4OUQB.js";import"./chunk-6Y2WMLDZ.js";import{l as h}from"./chunk-5CYX42KV.js";import{$a as w,Ea as d,Ha as p,Ja as s,Ka as F,La as x,Ma as M,Na as a,Oa as l,Pa as m,Q as I,Qa as S,Ta as C,U as f,Ua as r,Za as c,ba as y,bb as _,ca as b,ha as k,la as V,va as i}from"./chunk-XT2ARYM3.js";function L(o,n){if(o&1&&m(0,"shared-input-field",2),o&2){let e=r();p("label","Velocidad de corrosi\xF3n:")("value",e.coupon.corrosionRate)}}var T=class o{coupon;isCoupons(n){return n.corrosionRate!==void 0}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["app-coupons-form"]],inputs:{coupon:"coupon"},standalone:!0,features:[_],decls:9,vars:10,consts:[[1,"coupon-form","column","g-1"],[1,"column"],[3,"label","value"]],template:function(e,t){e&1&&(a(0,"div",0)(1,"h3"),c(2),l(),a(3,"div",1),m(4,"shared-input-field",2)(5,"shared-input-field",2)(6,"shared-input-field",2)(7,"shared-input-field",2),d(8,L,1,2,"shared-input-field",2),l()()),e&2&&(i(2),w(" ",t.isCoupons(t.coupon)?"Cup\xF3n de Muestreo":"Cup\xF3n Blanco"," "),i(2),p("label","Serie:")("value",t.coupon.serial),i(),p("label","Peso Inicial:")("value",t.coupon.initialMass),i(),p("label","Peso antes de la limpieza:")("value",t.coupon.massBeforeCleaning),i(),p("label","Peso final:")("value",t.coupon.finalMass),i(),s(t.isCoupons(t.coupon)?8:-1))},dependencies:[h,v,E]})};function R(o,n){if(o&1&&m(0,"app-coupons-form",7),o&2){let e=r();p("coupon",e.coupon().blank)}}function $(o,n){if(o&1&&m(0,"app-coupons-form",8),o&2){let e=n.$implicit;p("coupon",e)}}var D=class o{coupon=V.required();closeModal=new k;onCloseDetails(){this.closeModal.emit(!1)}copyToClipboard(n){navigator.clipboard.writeText(n.toString()).catch(e=>console.error("Failed to copy:",e))}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["app-coupons-modal"]],inputs:{coupon:[1,"coupon"]},outputs:{closeModal:"closeModal"},standalone:!0,features:[_],decls:18,vars:8,consts:[[1,"modal-content","column"],[1,"modal-header","row"],[1,"btn","btn-primary",3,"click"],[1,"modal-body","column","g-1"],[1,"row","g-1"],[1,"column","g-2","wd-50"],[3,"label","value"],[1,"wd-50",3,"coupon"],[3,"coupon"]],template:function(e,t){e&1&&(a(0,"div",0)(1,"div",1)(2,"h2"),c(3),l(),a(4,"button",2),C("click",function(){return t.onCloseDetails()}),c(5,"\xD7"),l()(),a(6,"div",3)(7,"div",4)(8,"div",5)(9,"h3"),c(10,"Informaci\xF3n General"),l(),m(11,"shared-input-field",6)(12,"shared-input-field",6)(13,"shared-input-field",6),l(),d(14,R,1,1,"app-coupons-form",7),l(),a(15,"div",4),x(16,$,1,1,"app-coupons-form",8,F),l()()()),e&2&&(i(3),w("",t.coupon().samplingPoint," Detalles"),i(8),p("label","Fecha de instalaci\xF3n:")("value",t.coupon().installationDate),i(),p("label","Fecha de retiro:")("value",t.coupon().withdrawalDate),i(),p("label","Tiempo de exposici\xF3n:")("value",t.coupon().exposureTime),i(),s(t.coupon().blank?14:-1),i(2),M(t.coupon().coupons))},dependencies:[h,T,v,E],styles:[".modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:1rem;gap:2rem;max-height:100vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{justify-content:space-between}"]})};function q(o,n){if(o&1){let e=S();a(0,"shared-cupon-card",7),C("sendCupon",function(u){y(e);let g=r(3);return b(g.showDetails(u))}),l()}if(o&2){let e=n.$implicit;p("coupon",e)}}function G(o,n){if(o&1&&(a(0,"div",5),x(1,q,1,1,"shared-cupon-card",6,F),l()),o&2){let e=r(2);i(),M(e.filteredCoupons)}}function H(o,n){o&1&&(a(0,"p"),c(1,"No se encontraron puntos de muestreo"),l())}function W(o,n){if(o&1){let e=S();a(0,"shared-filter",4),C("filterChange",function(u){y(e);let g=r();return b(g.applyFilter(u))}),l(),d(1,G,3,0,"div",5)(2,H,2,0,"p")}if(o&2){let e=r();p("filters",e.samplingPointFilters)("label",e.label),i(),s(e.filteredCoupons.length>0?1:2)}}function Z(o,n){if(o&1){let e=S();a(0,"div",3)(1,"app-coupons-modal",8),C("closeModal",function(){y(e);let u=r();return b(u.closeDetails())}),l()()}if(o&2){let e=r();i(),p("coupon",e.selectedCoupon)}}var P=class o{coupons=[];selectedCoupon=null;filteredCoupons=[];selectedFilter="All";label="Filtrar por punto de instalaci\xF3n";samplingPointFilters=["All","CUS","EPO","CUP","LBZ","COV","CAU","VAS"];excelService=I(B);onFileSelected(n){n&&this.excelService.callCoupon(n).subscribe(e=>{this.coupons=e,this.applyFilter("All")},e=>console.error("Error reading Excel file:",e))}applyFilter(n){this.selectedFilter=typeof n=="string"?n:n.target.value,this.selectedFilter==="All"?this.filteredCoupons=[...this.coupons]:this.filteredCoupons=this.coupons.filter(e=>e.samplingPoint.endsWith(this.selectedFilter))}showDetails(n){this.selectedCoupon=n}closeDetails(){this.selectedCoupon=null}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["app-coupons"]],standalone:!0,features:[_],decls:5,vars:2,consts:[[1,"coupon","column","g-1","p-2"],[1,"upload-section"],[3,"fileSelected"],[1,"modal-overlay","row"],[3,"filterChange","filters","label"],[1,"coupons-container"],[3,"coupon"],[3,"sendCupon","coupon"],[1,"modal",3,"closeModal","coupon"]],template:function(e,t){e&1&&(a(0,"section",0)(1,"div",1)(2,"shared-file",2),C("fileSelected",function(g){return t.onFileSelected(g)}),l()(),d(3,W,3,3)(4,Z,2,1,"div",3),l()),e&2&&(i(3),s(t.coupons.length>0?3:-1),i(),s(t.selectedCoupon?4:-1))},dependencies:[h,v,A,N,O,D],styles:[".coupons-container[_ngcontent-%COMP%]{display:grid;width:100%;height:42rem;overflow-y:scroll;scrollbar-width:thin;scrollbar-color:#2b2724 #d4d4d4;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;z-index:1000}.modal[_ngcontent-%COMP%]{width:100%}"]})};export{P as default};
